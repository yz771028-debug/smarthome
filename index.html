<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="refresh" content="20">

<title>智慧居家監控系統</title>

<style>
:root{
--bg:#0b1220;
--text:#eaf0ff;
--muted:#9db0d6;
--line:#223154;
--good:#2dd4bf;
--warn:#fbbf24;
--bad:#fb7185;
}
body{
margin:0;
font-family:Arial;
background:radial-gradient(1200px 800px at 10% 10%,#162447 0,#0b1220 55%);
color:var(--text);
}
.wrap{max-width:1100px;margin:auto;padding:20px;}
.title{font-size:26px;font-weight:bold;text-align:center;}
.card{
background:#111a2e;
padding:15px;
margin-top:15px;
border-radius:10px;
border:1px solid var(--line);
}
.value{
font-size:40px;
font-weight:bold;
}
.good{color:#2dd4bf;}
.warn{color:#fbbf24;}
.bad{color:#fb7185;}
iframe{
width:100%;
height:260px;
border-radius:10px;
border:none;
background:white;
margin-top:10px;
}
</style>
</head>

<body>

<div class="wrap">

<div class="title">
智慧居家監控系統（ThingSpeak 雲端）
</div>

<div class="card">
溫度：
<div id="temp" class="value">--</div>
</div>

<div class="card">
濕度：
<div id="humi" class="value">--</div>
</div>

<div class="card">
瓦斯：
<div id="gas" class="value">--</div>
</div>

<div class="card">
溫度圖表
<iframe src="https://thingspeak.com/channels/3271973/charts/1?dynamic=true"></iframe>
</div>

<div class="card">
濕度圖表
<iframe src="https://thingspeak.com/channels/3271973/charts/2?dynamic=true"></iframe>
</div>

<div class="card">
瓦斯圖表
<iframe src="https://thingspeak.com/channels/3271973/charts/3?dynamic=true"></iframe>
</div>

</div>

<script>

const URL = "https://api.thingspeak.com/channels/3271973/feeds/last.json";

async function update(){
try{

const r = await fetch(URL);
const j = await r.json();

document.getElementById("temp").innerHTML = j.field1 + " °C";
document.getElementById("humi").innerHTML = j.field2 + " %";
document.getElementById("gas").innerHTML = j.field3;

}catch(e){}
}

update();

</script>

</body>
</html>
